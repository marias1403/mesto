(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r,o,i){var a=t.data,u=t.templateSelector,l=t.userId,s=i.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=a,this._templateSelector=u,this._userId=l,this._handleCardClick=n,this._handlePutLike=r,this._handleRemoveLike=o,this._handleDeleteClick=s,this._cardId=a._id,this._ownerId=a.owner}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"like",value:function(e){this._buttonPutLike.classList.toggle("elements__like_active"),this._numberOfLikes.textContent=e}},{key:"handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._buttonPutLike.addEventListener("click",(function(){e._buttonPutLike.classList.contains("elements__like_active")?e._handleRemoveLike(e._cardId,e):e._handlePutLike(e._cardId,e)})),this._buttonDelete.addEventListener("click",(function(){e._handleDeleteClick(e._cardId)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._data)}))}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._buttonPutLike=this._element.querySelector(".elements__like"),this._cardImage=this._element.querySelector(".elements__image"),this._numberOfLikes=this._element.querySelector(".elements__like-counter"),this._buttonDelete=this._element.querySelector(".elements__delete"),this._userId===this._ownerId&&this._buttonDelete.classList.add("elements__delete_enabled");for(var e=0;e<this._data.likes.length;e++)if(this._data.likes[e]._id===this._userId){this._buttonPutLike.classList.add("elements__like_active");break}return this._setEventListeners(),this._cardImage.src=this._data.image,this._cardImage.alt=this._data.title,this._element.querySelector(".elements__title").textContent=this._data.title,this._numberOfLikes.textContent=this._data.likes.length,this._element}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_showInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(r._config.inputErrorClass),t.classList.add(r._config.errorClass),t.textContent=e.validationMessage})),i(this,"_hideInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(r._config.inputErrorClass),t.classList.remove(r._config.errorClass),t.textContent=""})),i(this,"_validateInput",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),i(this,"_hasInvalidInputs",(function(){return r._inputs.some((function(e){return!e.validity.valid}))})),i(this,"disableButton",(function(){r._buttonSubmit.classList.add(r._config.inactiveButtonClass),r._buttonSubmit.disabled=!0})),i(this,"_enableButton",(function(){r._buttonSubmit.classList.remove(r._config.inactiveButtonClass),r._buttonSubmit.disabled=!1})),i(this,"_toggleButtonState",(function(){r._hasInvalidInputs()?r.disableButton():r._enableButton()})),i(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputs.forEach((function(e){e.addEventListener("input",(function(){r._validateInput(e),r._toggleButtonState()}))}))})),i(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners()})),this._config=t,this._formElement=n,this._buttonSubmit=this._formElement.querySelector(this._config.submitButtonSelector),this._inputs=Array.from(n.querySelectorAll(this._config.inputSelector))}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputs.forEach((function(t){e._hideInputError(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupFigcaption=t._popup.querySelector(".popup__figcaption"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.image,n=e.title;this._popupImage.src=t,this._popupImage.alt=n,this._popupFigcaption.textContent=n,f(_(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._form=t._popup.querySelector(".popup__form"),t._buttonSubmit=t._form.querySelector(".popup__submit-button"),t._buttonSubmitText=t._buttonSubmit.textContent,t._inputList=t._popup.querySelectorAll(".popup__input"),t}return t=a,n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){console.log(this._inputList),this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сохранение...";this._buttonSubmit.textContent=e?t:this._buttonSubmitText}},{key:"close",value:function(){m(w(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;m(w(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}],n&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function I(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".popup__form"),t}return t=a,(n=[{key:"setSubmitAction",value:function(e){this._submitAction=e}},{key:"setEventListeners",value:function(){var e=this;P(q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitAction()}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.userNameSelector,r=t.userStatusSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userStatus=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,status:this._userStatus.textContent}}},{key:"getUserAvatar",value:function(){return{avatar:this._userAvatar.src}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._userName.textContent=t,this._userStatus.textContent=n}},{key:"setAvatar",value:function(e){var t=e.avatar;this._userAvatar.src=t}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._header=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._request(this._baseUrl+"users/me",{headers:this._header})}},{key:"changeAvatar",value:function(e){var t=e.avatar;return this._request(this._baseUrl+"users/me/avatar",{method:"PATCH",headers:this._header,body:JSON.stringify({avatar:t})})}},{key:"editProfile",value:function(e){var t=e.name,n=e.about;return this._request(this._baseUrl+"users/me",{method:"PATCH",headers:this._header,body:JSON.stringify({name:t,about:n})})}},{key:"getInitialsCards",value:function(){return this._request(this._baseUrl+"cards",{headers:this._header})}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._request(this._baseUrl+"cards",{method:"POST",headers:this._header,body:JSON.stringify({name:t,link:n})})}},{key:"deleteCard",value:function(e){return this._request(this._baseUrl+"cards/"+e,{method:"DELETE",headers:this._header})}},{key:"putLike",value:function(e){return this._request(this._baseUrl+"cards/"+e+"/likes",{method:"PUT",headers:this._header})}},{key:"deleteLike",value:function(e){return this._request(this._baseUrl+"cards/"+e+"/likes",{method:"DELETE",headers:this._header})}},{key:"_request",value:function(e,t){return fetch(e,t).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(new Error(e.status))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=document.querySelector(".edit-button"),D=document.querySelector(".add-button"),V=document.querySelector(".profile__avatar-overlay");function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F,H=new U({baseUrl:"https://nomoreparties.co/v1/cohort-52/",headers:{authorization:"ae672644-5499-4af4-bef5-295b969af30e","Content-Type":"application/json"}}),J={};function M(e,t,n,o){var i=e.data,a=e.templateSelector,u=new r({data:i,templateSelector:a,userId:Q},t,n,o,{handleDeleteClick:function(e){Y.open(),Y.setSubmitAction((function(){H.deleteCard(e).then((function(){u.handleDeleteCard(),Y.close()})).catch((function(e){console.log("Error while deleting card",e)}))}))}});return u.generateCard()}F={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(F.formSelector)).forEach((function(e){var t=new a(F,e),n=e.getAttribute("name");J[n]=t,t.enableValidation()}));var z=new t({renderer:function(e){var t=M({data:{image:e.link,title:e.name,likes:e.likes,_id:e._id,owner:e.owner._id},templateSelector:".template",userId:Q},G,ee,te);z.addItem(t)}},".elements"),$=new y(".popup_type_image");function G(e){$.open({image:e.image,title:e.title})}$.setEventListeners();var K=new T({userNameSelector:".profile__name",userStatusSelector:".profile__status",userAvatarSelector:".profile__avatar"}),Q=null;Promise.all([H.getInitialsCards(),H.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q=i._id,z.renderItems(o),K.setUserInfo({name:i.name,about:i.about}),K.setAvatar({avatar:i.avatar})})).catch((function(e){console.log(e)}));var W=new E({popupSelector:".popup_type_edit-profile",handleFormSubmit:function(e){W.renderLoading(!0,"Сохранение..."),H.editProfile({name:e.name,about:e.status}).then((function(e){K.setUserInfo({name:e.name,about:e.about}),W.close()})).catch((function(e){console.log("Error while editing profile",e)})).finally((function(){W.renderLoading(!1)}))}});W.setEventListeners(),x.addEventListener("click",(function(){J["user-info"].disableButton(),J["user-info"].resetValidation();var e=K.getUserInfo(),t=e.name,n=e.status;W.setInputValues({name:t,status:n}),W.open()}));var X=new E({popupSelector:".popup_type_add-card",handleFormSubmit:function(e){X.renderLoading(!0,"Создание..."),H.addCard({link:e.link,name:e.title}).then((function(e){var t=M({data:{image:e.link,title:e.name,likes:e.likes,_id:e._id,owner:e.owner._id},templateSelector:".template",userId:Q},G,ee,te);z.prependItem(t),X.close()})).catch((function(e){console.log("Error while adding card",e)})).finally((function(){X.renderLoading(!1)}))}});X.setEventListeners(),D.addEventListener("click",(function(){J["card-element"].disableButton(),J["card-element"].resetValidation(),X.open()}));var Y=new R({popupSelector:".popup_type_delete"});Y.setEventListeners();var Z=new E({popupSelector:".popup_type_avatar",handleFormSubmit:function(e){Z.renderLoading(!0,"Сохранение..."),H.changeAvatar({avatar:e.avatar}).then((function(e){K.setAvatar({avatar:e.avatar}),Z.close()})).catch((function(e){console.log("Error while changing avatar",e)})).finally((function(){Z.renderLoading(!1)}))}});function ee(e,t){H.putLike(e).then((function(e){t.like(e.likes.length)})).catch((function(e){console.log("Error while putting like",e)}))}function te(e,t){H.deleteLike(e).then((function(e){t.like(e.likes.length)})).catch((function(e){console.log("Error while removing like",e)}))}Z.setEventListeners(),V.addEventListener("click",(function(){J["user-avatar"].disableButton(),J["user-avatar"].resetValidation();var e=K.getUserAvatar().avatar;Z.setInputValues({avatar:e}),Z.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBQ0MsR0FDTnhELFFBQVFDLElBQUksOEJBQStCdUQsRUFDNUMsSUFDQTJCLFNBQVEsV0FDUE0sRUFBbUJULGVBQWMsRUFDbEMsR0FDSixJQWFILFNBQVNoTCxHQUFjOEgsRUFBUW1DLEdBQzdCcEIsRUFBSThDLFFBQVE3RCxHQUNUSSxNQUFLLFNBQUNnRCxHQUNMakIsRUFBWTJCLEtBQUtWLEVBQUloSixNQUFNQyxPQUM1QixJQUNBb0gsT0FBTSxTQUFDQyxHQUNOeEQsUUFBUUMsSUFBSSwyQkFBNEJ1RCxFQUN6QyxHQUNKLENBRUQsU0FBU3ZKLEdBQWlCNkgsRUFBUW1DLEdBQ2hDcEIsRUFBSWdELFdBQVcvRCxHQUNaSSxNQUFLLFNBQUNnRCxHQUNMakIsRUFBWTJCLEtBQUtWLEVBQUloSixNQUFNQyxPQUM1QixJQUNBb0gsT0FBTSxTQUFDQyxHQUNOeEQsUUFBUUMsSUFBSSw0QkFBNkJ1RCxFQUMxQyxHQUNKLENBNUJEaUMsRUFBbUJyQixvQkFFbkJ4QixFQUFpQmpILGlCQUFpQixTQUFTLFdBQ3pDb0gsRUFBZSxlQUFlakYsZ0JBQzlCaUYsRUFBZSxlQUFlcUMsa0JBQzlCLElBQVFuRSxFQUFXb0QsRUFBU3lCLGdCQUFwQjdFLE9BQ1J3RSxFQUFtQkosZUFBZSxDQUFFcEUsT0FBUUEsSUFDNUN3RSxFQUFtQnRDLE1BQ3BCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3ZhbGlkYXRpb25Db25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHVzZXJJZCB9LCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVB1dExpa2UsIGhhbmRsZVJlbW92ZUxpa2UsIHsgaGFuZGxlRGVsZXRlQ2xpY2sgfSkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlUHV0TGlrZSA9IGhhbmRsZVB1dExpa2U7XG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSA9IGhhbmRsZVJlbW92ZUxpa2U7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lcjtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fZWxlbWVudCcpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgbGlrZShsaWtlQ291bnQpIHtcbiAgICB0aGlzLl9idXR0b25QdXRMaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRzX19saWtlX2FjdGl2ZScpO1xuICAgIHRoaXMuX251bWJlck9mTGlrZXMudGV4dENvbnRlbnQgPSBsaWtlQ291bnQ7XG4gIH1cblxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uUHV0TGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9idXR0b25QdXRMaWtlLmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudHNfX2xpa2VfYWN0aXZlJykpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzLl9jYXJkSWQsIHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlUHV0TGlrZSh0aGlzLl9jYXJkSWQsIHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElkKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9kYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9idXR0b25QdXRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UnKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faW1hZ2UnKTtcbiAgICB0aGlzLl9udW1iZXJPZkxpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UtY291bnRlcicpO1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19kZWxldGUnKTtcbiAgICBpZiAodGhpcy5fdXNlcklkID09PSB0aGlzLl9vd25lcklkKSB7XG4gICAgICB0aGlzLl9idXR0b25EZWxldGUuY2xhc3NMaXN0LmFkZCgnZWxlbWVudHNfX2RlbGV0ZV9lbmFibGVkJyk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2RhdGEubGlrZXNbaV0uX2lkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uUHV0TGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9kYXRhLmltYWdlO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9kYXRhLnRpdGxlO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS50aXRsZTtcbiAgICB0aGlzLl9udW1iZXJPZkxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcblxuICBfdmFsaWRhdGVJbnB1dCA9IChpbnB1dCkgPT4ge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0cyA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pXG4gIH07XG5cbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICBfZW5hYmxlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfTtcblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXRzKCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVJbnB1dChpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcbn1cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0IHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLl9wb3B1cEZpZ2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZ2NhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4oeyBpbWFnZSwgdGl0bGUgfSkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2U7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSB0aXRsZTtcbiAgICB0aGlzLl9wb3B1cEZpZ2NhcHRpb24udGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoIHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9ICkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnRcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9pbnB1dExpc3QpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pXG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvciggeyBwb3B1cFNlbGVjdG9yIH0gKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcilcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLl9zdWJtaXRBY3Rpb24gPSBjYWxsYmFjaztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0QWN0aW9uKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyU3RhdHVzU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJTdGF0dXNTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHN0YXR1czogdGhpcy5fdXNlclN0YXR1cy50ZXh0Q29udGVudFxuICAgIH1cbiAgfVxuXG4gIGdldFVzZXJBdmF0YXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhci5zcmNcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlclN0YXR1cy50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0QXZhdGFyKHthdmF0YXJ9KSB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXIgPSBjb25maWcuaGVhZGVycztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHRoaXMuX2Jhc2VVcmwgKyAndXNlcnMvbWUnLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlciB9KVxuICB9XG5cbiAgY2hhbmdlQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl9iYXNlVXJsICsgJ3VzZXJzL21lL2F2YXRhcicsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KCB7IGF2YXRhciB9KSxcbiAgICB9KVxuICB9XG5cbiAgZWRpdFByb2ZpbGUoeyBuYW1lLCBhYm91dH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl9iYXNlVXJsICsgJ3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoIHsgbmFtZSwgYWJvdXQgfSksXG4gICAgfSlcbiAgfVxuXG4gIGdldEluaXRpYWxzQ2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArICdjYXJkcycsIHsgaGVhZGVyczogdGhpcy5faGVhZGVyIH0pXG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArICdjYXJkcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoIHsgbmFtZSwgbGluayB9KSxcbiAgICB9KVxuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl9iYXNlVXJsICsgJ2NhcmRzLycgKyBjYXJkSWQsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXG4gICAgfSlcbiAgfVxuXG4gIHB1dExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArICdjYXJkcy8nICsgY2FyZElkICsgJy9saWtlcycsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXG4gICAgfSlcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArICdjYXJkcy8nICsgY2FyZElkICsgJy9saWtlcycsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXG4gICAgfSlcbiAgfVxuXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXMpKTtcbiAgfVxufVxuXG4iLCJleHBvcnQgY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5Jyk7XG4iLCJpbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHsgYnV0dG9uRWRpdFByb2ZpbGUsIGJ1dHRvbkFkZENhcmQsIGJ1dHRvbkVkaXRBdmF0YXIgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNTIvJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdhZTY3MjY0NC01NDk5LTRhZjQtYmVmNS0yOTViOTY5YWYzMGUnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH1cbn0pO1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKHtkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yfSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVQdXRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7IGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHVzZXJJZCB9LFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVQdXRMaWtlLFxuICAgIGhhbmRsZVJlbW92ZUxpa2UsXG4gICAge1xuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkSWQpID0+IHtcbiAgICAgICAgcG9wdXBDb25maXJtRGVsZXRlLm9wZW4oKTtcbiAgICAgICAgcG9wdXBDb25maXJtRGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICAgICAgICBwb3B1cENvbmZpcm1EZWxldGUuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgZGVsZXRpbmcgY2FyZCcsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoXG4gICAgICB7XG4gICAgICAgIGRhdGE6IHtpbWFnZTogY2FyZERhdGEubGluaywgdGl0bGU6IGNhcmREYXRhLm5hbWUsIGxpa2VzOiBjYXJkRGF0YS5saWtlcywgX2lkOiBjYXJkRGF0YS5faWQsIG93bmVyOiBjYXJkRGF0YS5vd25lci5faWR9LFxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlJywgdXNlcklkOiB1c2VySWQgfSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVQdXRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlKTtcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgfVxufSwgJy5lbGVtZW50cycpO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhjYXJkRGF0YSkge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgaW1hZ2U6IGNhcmREYXRhLmltYWdlLCB0aXRsZTogY2FyZERhdGEudGl0bGUgfSk7XG59XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJywgdXNlclN0YXR1c1NlbGVjdG9yOiAnLnByb2ZpbGVfX3N0YXR1cycsIHVzZXJBdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInfSk7XG5cbmxldCB1c2VySWQgPSBudWxsO1xuXG5Qcm9taXNlLmFsbChbXG4gIGFwaS5nZXRJbml0aWFsc0NhcmRzKCksXG4gIGFwaS5nZXRVc2VySW5mbygpLFxuXSlcbiAgLnRoZW4oKFtjYXJkcywgdXNlcl0pID0+IHtcbiAgICB1c2VySWQgPSB1c2VyLl9pZDtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe25hbWU6IHVzZXIubmFtZSwgYWJvdXQ6IHVzZXIuYWJvdXR9KTtcbiAgICB1c2VySW5mby5zZXRBdmF0YXIoe2F2YXRhcjogdXNlci5hdmF0YXJ9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuXG5jb25zdCBwb3B1cFByb2ZpbGVFbGVtZW50ID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgcG9wdXBQcm9maWxlRWxlbWVudC5yZW5kZXJMb2FkaW5nKHRydWUsICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICAgIGFwaS5lZGl0UHJvZmlsZSh7IG5hbWU6IGlucHV0VmFsdWVzLm5hbWUsIGFib3V0OiBpbnB1dFZhbHVlcy5zdGF0dXMgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe25hbWU6IHJlcy5uYW1lLCBhYm91dDogcmVzLmFib3V0fSk7XG4gICAgICAgIHBvcHVwUHJvZmlsZUVsZW1lbnQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgZWRpdGluZyBwcm9maWxlJywgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwUHJvZmlsZUVsZW1lbnQucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxufSk7XG5cbnBvcHVwUHJvZmlsZUVsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWyd1c2VyLWluZm8nXS5kaXNhYmxlQnV0dG9uKCk7XG4gIGZvcm1WYWxpZGF0b3JzWyd1c2VyLWluZm8nXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgY29uc3QgeyBuYW1lLCBzdGF0dXMgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHBvcHVwUHJvZmlsZUVsZW1lbnQuc2V0SW5wdXRWYWx1ZXMoeyBuYW1lOiBuYW1lLCBzdGF0dXM6IHN0YXR1cyB9KTtcbiAgcG9wdXBQcm9maWxlRWxlbWVudC5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBDYXJkRWxlbWVudCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2FkZC1jYXJkJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgcG9wdXBDYXJkRWxlbWVudC5yZW5kZXJMb2FkaW5nKHRydWUsICfQodC+0LfQtNCw0L3QuNC1Li4uJyk7XG4gICAgYXBpLmFkZENhcmQoeyBsaW5rOiBpbnB1dFZhbHVlcy5saW5rLCBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YToge2ltYWdlOiByZXMubGluaywgdGl0bGU6IHJlcy5uYW1lLCBsaWtlczogcmVzLmxpa2VzLCBfaWQ6IHJlcy5faWQsIG93bmVyOiByZXMub3duZXIuX2lkIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlJywgdXNlcklkOiB1c2VySWR9LCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVB1dExpa2UsIGhhbmRsZVJlbW92ZUxpa2UpO1xuICAgICAgICBjYXJkTGlzdC5wcmVwZW5kSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgIHBvcHVwQ2FyZEVsZW1lbnQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgYWRkaW5nIGNhcmQnLCBlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBDYXJkRWxlbWVudC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59KTtcblxucG9wdXBDYXJkRWxlbWVudC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25BZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1snY2FyZC1lbGVtZW50J10uZGlzYWJsZUJ1dHRvbigpO1xuICBmb3JtVmFsaWRhdG9yc1snY2FyZC1lbGVtZW50J10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwQ2FyZEVsZW1lbnQub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwQ29uZmlybURlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZGVsZXRlJyB9KTtcblxucG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2F2YXRhcicsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dFZhbHVlcykgPT4ge1xuICAgIHBvcHVwUHJvZmlsZUF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUsICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICAgIGFwaS5jaGFuZ2VBdmF0YXIoeyBhdmF0YXI6IGlucHV0VmFsdWVzLmF2YXRhciB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIoe2F2YXRhcjogcmVzLmF2YXRhcn0pO1xuICAgICAgICBwb3B1cFByb2ZpbGVBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgY2hhbmdpbmcgYXZhdGFyJywgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwUHJvZmlsZUF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59KTtcblxucG9wdXBQcm9maWxlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWyd1c2VyLWF2YXRhciddLmRpc2FibGVCdXR0b24oKTtcbiAgZm9ybVZhbGlkYXRvcnNbJ3VzZXItYXZhdGFyJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHsgYXZhdGFyIH0gPSB1c2VySW5mby5nZXRVc2VyQXZhdGFyKCk7XG4gIHBvcHVwUHJvZmlsZUF2YXRhci5zZXRJbnB1dFZhbHVlcyh7IGF2YXRhcjogYXZhdGFyIH0pO1xuICBwb3B1cFByb2ZpbGVBdmF0YXIub3BlbigpO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVB1dExpa2UoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBhcGkucHV0TGlrZShjYXJkSWQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2FyZEVsZW1lbnQubGlrZShyZXMubGlrZXMubGVuZ3RoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgcHV0dGluZyBsaWtlJywgZXJyKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVSZW1vdmVMaWtlKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcbiAgYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNhcmRFbGVtZW50Lmxpa2UocmVzLmxpa2VzLmxlbmd0aCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHJlbW92aW5nIGxpa2UnLCBlcnIpO1xuICAgIH0pXG59XG4iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJ1xufTtcbiJdLCJuYW1lcyI6WyJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsInRoaXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJpdGVtcyIsImNsZWFyIiwiZm9yRWFjaCIsIml0ZW0iLCJDYXJkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlUHV0TGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX2RhdGEiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVB1dExpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiY29udGVudCIsImNsb25lTm9kZSIsImxpa2VDb3VudCIsIl9idXR0b25QdXRMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX251bWJlck9mTGlrZXMiLCJ0ZXh0Q29udGVudCIsIl9lbGVtZW50IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX2J1dHRvbkRlbGV0ZSIsIl9jYXJkSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJhZGQiLCJpIiwibGlrZXMiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJpbWFnZSIsImFsdCIsInRpdGxlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXQiLCJlcnJvciIsIl9mb3JtRWxlbWVudCIsImlkIiwiX2NvbmZpZyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaW5wdXRzIiwic29tZSIsIl9idXR0b25TdWJtaXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0cyIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3ZhbGlkYXRlSW5wdXQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJlIiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBGaWdjYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2J1dHRvblN1Ym1pdFRleHQiLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhbGxiYWNrIiwiX3N1Ym1pdEFjdGlvbiIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJTdGF0dXNTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyU3RhdHVzIiwiX3VzZXJBdmF0YXIiLCJzdGF0dXMiLCJhdmF0YXIiLCJhYm91dCIsIkFwaSIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXIiLCJoZWFkZXJzIiwiX3JlcXVlc3QiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxpbmsiLCJjYXJkSWQiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQWRkQ2FyZCIsImJ1dHRvbkVkaXRBdmF0YXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZm9ybVZhbGlkYXRvcnMiLCJjcmVhdGVDYXJkIiwiY2FyZCIsInBvcHVwQ29uZmlybURlbGV0ZSIsIm9wZW4iLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGVDYXJkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiZ2VuZXJhdGVDYXJkIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZExpc3QiLCJjYXJkRGF0YSIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ1c2VySW5mbyIsImFsbCIsImdldEluaXRpYWxzQ2FyZHMiLCJnZXRVc2VySW5mbyIsImNhcmRzIiwidXNlciIsInJlbmRlckl0ZW1zIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJwb3B1cFByb2ZpbGVFbGVtZW50IiwiaW5wdXRWYWx1ZXMiLCJyZW5kZXJMb2FkaW5nIiwiZWRpdFByb2ZpbGUiLCJyZXMiLCJmaW5hbGx5IiwicmVzZXRWYWxpZGF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJwb3B1cENhcmRFbGVtZW50IiwiYWRkQ2FyZCIsInByZXBlbmRJdGVtIiwicG9wdXBQcm9maWxlQXZhdGFyIiwiY2hhbmdlQXZhdGFyIiwicHV0TGlrZSIsImxpa2UiLCJkZWxldGVMaWtlIiwiZ2V0VXNlckF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=